from settings import Settings
from typing import List, Dict

class CatalogParser:
    __instance = None

    def __init__(self):
        courses_types = Settings.get_instance().COURSES_TYPES
        courses_subtypes = Settings.get_instance().COURSES_SUBTYPES
        self.__id_list = ["104031", "104166", "234114", "234129", "324033", "104032", "114071", "234124", "234247",
                          "234125", "234141", "094412", "104134", "234218", "044252", "234292", "234118", "234123",
                          "236360", "236343", "104033", "104174", "104122", "104142", "104285",
                          "104295", "124510", "234326", "234329", "234325", '124400', '124503', '124801', '125801',
                          "114052", "114054", "114073", "114101", "114246", "124120", "125001", "125801", "114075",
                          "134058", "134020", "234301", "234302", "234303", "234304", "234306", "234313",
                          "234493", "234901", "236026", "236200", "236270", "236271", "236272", "236278", "236268",
                          "236299", "236303", "236304", "236305", "236306", "236307", "236308", "236309", "236310",
                          "236311", "236313", "236315", "236319", "236321", "236322", "236323", "236324", "236328",
                          "236329", "236330", "236332", "236333", "236334", "236336", "236339", "236340", "236341",
                          "236342", "236345", "236346", "236347", "236348", "236349", "236350", "236351", "236356",
                          "236357", "236358", "236359", "236361", "236363", "236366", "236368", "236369", "236370",
                          "236371", "236372", "236373", "236374", "236375", "236376", "236377", "236378", "236379",
                          "236381", "236388", "236499", "236500", "236501", "236502",
                          "236503", "236505", "236506", "236507", "236508", "236509", "236510", "236512",
                          "236513", "236515", "236518", "236520", "236521", "236522", "236523", "236524", "236525",
                          "236526", '236612', '236613', '236621', '236622', '236623', '236624', '236625',
                          '236627', '236628', '236629', '236630', '236631', '236632', '236633', '236634', '236635',
                          '236637', '236638', '236640', '236641', '236643', '236644', '236645', '236646', '236647',
                          '236648', '236649', '236650', '236651', '236652', '236653', '236654', '236655', '236657',
                          '236658', '236660', '236661', '236698', '236700', '236703', '236712', '236715', '236716',
                          '236719', '236729', '236754', '236755', '236756', '236757', '236760', '236777', '236779',
                          '236780', '236781', '236790', '236800', '236811', '236812', '236813', '236814', '236815',
                          '236816', '236817', '236818', '236819', '236820', '236821', '236822', '236823', '236824',
                          '236825', '236826', '236827', '236828', '236829', '236830', '236831', '236832', '236833',
                          '236834', '236835', '236860', '236861', '236862', '236873', '236874', '236875', '236927',
                          '236941', '236950', '236951', '236990', '236991', '238739', '238900', '238901', '134019',
                          '238902', '044105', '044127', '044131', '044137', '044157', '044167',
                          '044169', '134113', '134128', '134119', '134142', '134120', '134020', '134058', '134082',
                          '044202', '046201', '046206', '046332', '046880', '048878', '048921', '086761', '094222',
                          '094313', '094325', '094334', '094591', '096224', '096250',
                          '096262', '096326', '096411', '097317', '104122', '104135', '104142', '104157', '104165',
                          '104174', '104158', '104177', '104192', '104221', '104276', '104279', '104293',
                          '106378', '106383', '114101', '114246', '115203', '115204', '114036', '116217', '116354',
                          '124120', '094423'
                          ]

        # deleted courses: '104223' - מדח וטורי פורייה - העברנו בגלל שכל הקדמים בתיאור., ".
        # "236504" - פרויקט המשך בתוכנה- לא לתלת שנתי.
        self.__three_year_degree_requirements_by_type = {
            courses_types[0]: ["104031", "104166", "234114", "234129", "324033", "104032", "114071", "234124",
                               "234125", "234141", "094412", "104134", "234218", "044252", "234292", "234118", "234123",
                               "236360", "236343", "234247"],
            courses_types[1]: ["000031"],
            courses_types[2]: ["000021", "000022", "000023"],
            courses_types[3]: ["104033", "104174", "104122", "104142", "104285", "104295"],
            courses_types[4]: ["114075", "114052", "114054", "114073", "114101", "114246", "124120", "125001", "125801",
                               "124510", "134058", "134020"],
            courses_types[5]: ["000011", "000012"],  # add general sport course.
            courses_types[6]: ["234301", "234302", "234303", "234304", "234306", "234313", "234325", "234326", "234329",
                               "234493", "234901", "236026", "236200", "236270", "236271", "236272", "236278", "236268",
                               "236299", "236303", "236304", "236305", "236306", "236307", "236308", "236309", "236310",
                               "236311", "236313", "236315", "236319", "236321", "236322", "236323", "236324", "236328",
                               "236329", "236330", "236332", "236333", "236334", "236336", "236339", "236340", "236341",
                               "236342", "236345", "236346", "236347", "236348", "236349", "236350", "236351", "236356",
                               "236357", "236358", "236359", "236361", "236363", "236366", "236368", "236369", "236370",
                               "236371", "236372", "236373", "236374", "236375", "236376", "236377", "236378", "236379",
                               "236381", "236388", "236499", "236500", "236501", "236502", '236663','236332', '236333',
                               "236503", "236504", "236505", "236506", "236507", "236508", "236509", "236510", "236512",
                               "236513", "236515", "236518", "236520", "236521", "236522", "236523", "236524", "236525",
                               "236526", '236612', '236613', '236621', '236622', '236623', '236624', '236625',
                               '236627', '236628', '236629', '236630', '236631', '236632', '236633', '236634', '236635',
                               '236637', '236638', '236640', '236641', '236643', '236644', '236645', '236646', '236647',
                               '236648', '236649', '236650', '236651', '236652', '236653', '236654', '236655', '236657',
                               '236658', '236660', '236661', '236698', '236700', '236703', '236712', '236715', '236716',
                               '236719', '236729', '236754', '236755', '236756', '236757', '236760', '236777', '236779',
                               '236780', '236781', '236790', '236800', '236811', '236812', '236813', '236814', '236815',
                               '236816', '236817', '236818', '236819', '236820', '236821', '236822', '236823', '236824',
                               '236825', '236826', '236827', '236828', '236829', '236830', '236831', '236832', '236833',
                               '236834', '236835', '236860', '236861', '236862', '236873', '236874', '236875', '236927',
                               '236941', '236950', '236951', '236990', '236991', '238739', '238900', '238901',
                               '238902'],
            courses_types[7]: ['044105', '044127', '044131', '044137', '044157', '044167', '044169',
                               '044202', '046201', '046206', '046332', '046880', '048878', '048921', '086761', '094222',
                               '094313', '094423', '094333', '094325', '094334', '094591', '096224', '096250',
                               '096262', '096326', '096411', '097317', '104122', '104135', '104142', '104157', '104165',
                               '104174', '104158', '104177', '104192', '104221', '104223', '104276', '104279', '104293',
                               '106378', '106383', '114101', '114246', '115203', '115204', '114036', '116217', '116354',
                               '124120', '124400', '124503', '124801', '125801', '134019', '134020', '134058', '134082',
                               '134113', '134128', '134119', '134142', '134120']
        }

        self.__three_year_degree_requirements_by_subtype = {
            "שרשרת מדעית":
                {
                    Settings.get_instance().COURSES_SUBTYPES[0]: ['114075'],
                    Settings.get_instance().COURSES_SUBTYPES[1]: ['114052', '114054'],
                    Settings.get_instance().COURSES_SUBTYPES[2]: ['134058', '134020'],
                    Settings.get_instance().COURSES_SUBTYPES[3]: ['124120', '125801'],
                    Settings.get_instance().COURSES_SUBTYPES[4]: ['124510'],
                    Settings.get_instance().COURSES_SUBTYPES[5]: ['124120', '114052']
                }
        }

        self.__three_year_degree_requirements_credit_points = {
            courses_types[0]: 73.5,
            courses_types[1]: 2,
            courses_types[2]: 6,
            courses_types[3]: 2.5,
            courses_types[4]: 8,
            courses_types[5]: 2,
            courses_types[6]: 18,
            courses_types[7]: 6.5,
            courses_types[8]: 1,
            courses_types[9]: 1
        }
        if CatalogParser.__instance is None:
            CatalogParser.__instance = self
        else:
            raise Exception("CatalogParser instance already exists")


    @staticmethod
    def get_instance():
        if CatalogParser.__instance is None:
            raise Exception("CatalogParser instance does not exist")
        return CatalogParser.__instance

    def get_three_year_degree_requirements_credit_points(self) -> Dict:
        return self.__three_year_degree_requirements_credit_points

    def get_id_courses_sorted_by_courses_type(self) -> Dict:
        return self.__three_year_degree_requirements_by_type

    def get_id_courses_sorted_by_courses_subtype(self) -> Dict:
        return self.__three_year_degree_requirements_by_subtype

    def get_id_list(self):
        return self.__id_list
